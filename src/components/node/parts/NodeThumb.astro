---
import { Figure } from '@components/mdx';
import { getNodeImage, getNodeThumbImage, type BaseNode } from '@content/index';

export type Props = {
    node: BaseNode;
};

const { node } = Astro.props;

const thumbImage = getNodeThumbImage(node);
const src = thumbImage && getNodeImage(node, thumbImage.src);
---

{thumbImage && <div class="thumb">{src && <Figure {...thumbImage} notitle src={src()} />}</div>}

<style is:global>
    .thumb,
    .thumb .figure,
    .thumb .block {
        width: 100%;
        height: 100%;
        min-height: 8em;
    }

    .thumb .figure picture {
        position: relative;
    }

    .thumb .figure picture img {
        position: absolute;
        top: 0;
        bottom: 0;
        object-fit: cover;
        object-position: 30%;
    }
</style>
