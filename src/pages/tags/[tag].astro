---
import TagPage from '../../templates/TagPage.astro';
import { allTags } from '../../queries/tags';
import type { AstroNode, BlogPost, TagNode } from '../../types';

export interface Props {
    tag: TagNode;
}

export async function getStaticPaths({}) {
    const allNodes = await Astro.glob<AstroNode<BlogPost>>('../**/*.{md,mdx}');
    const tags = allTags(allNodes);
    return tags.map(tag => ({
        params: { tag: tag.title },
        props: { tag },
    }));
}

const { tag } = Astro.props;
---

<TagPage content={tag} />
